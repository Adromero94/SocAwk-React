{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\judok\\\\Documents\\\\SocAwk-React-1\\\\src\\\\components\\\\VerifyEmail.js\";\nimport React from 'react';\nimport { useAuthValue } from '../context/AuthContext';\nimport { useState, useEffect } from 'react';\nimport { auth } from '../firebase/firebase';\nimport { sendEmailVerification } from 'firebase/auth';\nimport { useNavigate } from 'react-router-dom';\n\nfunction VerifyEmail() {\n  const {\n    currentUser\n  } = useAuthValue();\n  const [time, setTime] = useState(60);\n  const {\n    timeActive,\n    setTimeActive\n  } = useAuthValue();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const interval = setInterval(() => {\n      currentUser && currentUser.reload().then(() => {\n        if (currentUser === null || currentUser === void 0 ? void 0 : currentUser.emailVerified) {\n          clearInterval(interval);\n          navigate('/');\n        }\n      }).catch(err => {\n        alert(err.message);\n      });\n    }, 1000);\n  }, [navigate, currentUser]);\n  useEffect(() => {\n    let interval = null;\n\n    if (timeActive && time !== 0) {\n      interval = setInterval(() => {\n        setTime(time => time - 1);\n      }, 1000);\n    } else if (time === 0) {\n      setTimeActive(false);\n      setTime(60);\n      clearInterval(interval);\n    }\n\n    return () => clearInterval(interval);\n  }, [timeActive, time, setTimeActive]);\n\n  const resendEmailVerification = () => {\n    sendEmailVerification(auth.currentUser).then(() => {\n      setTimeActive(true);\n    }).catch(err => {\n      alert(err.message);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"verifyEmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Verify your Email Address\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, \"A Verification email has been sent to:\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, currentUser === null || currentUser === void 0 ? void 0 : currentUser.email)), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Follow the instruction in the email to verify your account\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"d-block btn btn-primary\",\n    onClick: resendEmailVerification,\n    disabled: timeActive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Resend Email \", timeActive && time)));\n}\n\nexport default VerifyEmail;","map":{"version":3,"sources":["C:/Users/judok/Documents/SocAwk-React-1/src/components/VerifyEmail.js"],"names":["React","useAuthValue","useState","useEffect","auth","sendEmailVerification","useNavigate","VerifyEmail","currentUser","time","setTime","timeActive","setTimeActive","navigate","interval","setInterval","reload","then","emailVerified","clearInterval","catch","err","alert","message","resendEmailVerification","email"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useAuthValue } from '../context/AuthContext'\r\nimport { useState, useEffect } from 'react'\r\nimport { auth } from '../firebase/firebase'\r\nimport { sendEmailVerification } from 'firebase/auth'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nfunction VerifyEmail() {\r\n  const { currentUser } = useAuthValue()\r\n  const [time, setTime] = useState(60)\r\n  const { timeActive, setTimeActive } = useAuthValue()\r\n  const navigate = useNavigate()\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      currentUser &&\r\n        currentUser\r\n          .reload()\r\n          .then(() => {\r\n            if (currentUser?.emailVerified) {\r\n              clearInterval(interval)\r\n              navigate('/')\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            alert(err.message)\r\n          })\r\n    }, 1000)\r\n  }, [navigate, currentUser])\r\n\r\n  useEffect(() => {\r\n    let interval = null\r\n    if (timeActive && time !== 0) {\r\n      interval = setInterval(() => {\r\n        setTime((time) => time - 1)\r\n      }, 1000)\r\n    } else if (time === 0) {\r\n      setTimeActive(false)\r\n      setTime(60)\r\n      clearInterval(interval)\r\n    }\r\n    return () => clearInterval(interval)\r\n  }, [timeActive, time, setTimeActive])\r\n\r\n  const resendEmailVerification = () => {\r\n    sendEmailVerification(auth.currentUser)\r\n      .then(() => {\r\n        setTimeActive(true)\r\n      })\r\n      .catch((err) => {\r\n        alert(err.message)\r\n      })\r\n  }\r\n\r\n  return (\r\n    <div className=\"center\">\r\n      <div className=\"verifyEmail\">\r\n        <h1>Verify your Email Address</h1>\r\n        <p>\r\n          <strong>A Verification email has been sent to:</strong>\r\n          <br />\r\n          <span>{currentUser?.email}</span>\r\n        </p>\r\n        <span>Follow the instruction in the email to verify your account</span>\r\n        <button className='d-block btn btn-primary'  onClick={resendEmailVerification} disabled={timeActive}>\r\n          Resend Email {timeActive && time}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VerifyEmail\r\n"]},"metadata":{},"sourceType":"module"}